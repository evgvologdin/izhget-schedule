{"version":3,"sources":["views/Routes.coffee"],"names":[],"mappings":"AAAA,IAAA;;;AAAA,MAAA,CAAO,CACL,aADK,EAEL,eAFK,EAGL,sBAHK,EAIL,sBAJK,EAKL,oBALK,CAAP,EAMG,SAAC,IAAD,EAAO,MAAP,EAAe,OAAf,EAAwB,OAAxB,EAAiC,KAAjC;SACK;;;;;;;mBACJ,QAAA,GAAU;;mBAEV,MAAA,GAAQ,SAAC,IAAD;AACN,UAAA;;QADO,OAAO,OAAA,CAAQ,aAAR;;MACd,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,OAAf,EAAwB,QAAxB,EAAkC,SAAA;eAChC,CAAA,CAAE,IAAF,CAAO,CAAC,MAAR,CAAA,CAAgB,CAAC,MAAjB,CAAA;MADgC,CAAlC;MAGA,KAAA,GAAU,CAAA,CAAE,+BAAA,CAAF;MACV,IAAA,GAAU,CAAA,CAAE,cAAF;MACV,IAAI,CAAC,QAAL,CAAA,CAAe,CAAC,MAAhB,CAAA;AAEA;AAAA;WAAA,qCAAA;;qBACI,CAAA,SAAC,OAAD;AACA,cAAA;UAAA,KAAA,GAAQ,KAAK,CAAC,KAAN,CAAA;UACR,KAAK,CAAC,QAAN,CAAe,SAAf;UACA,KAAK,CAAC,IAAN,CAAW,OAAO,CAAA,SAAE,CAAA,MAAT,CACT;YAAA,OAAA,EAAS,iCAAT;WADS,CAAX;UAEA,IAAI,CAAC,MAAL,CAAY,KAAZ;iBAEA,MAAM,CAAA,SAAE,CAAA,OAAR,CACE;YAAA,IAAA,EAAM,OAAN;YACA,OAAA,EAAS,SAAC,QAAD;cACP,IAAG,mBAAA,IAAuB,MAA1B;gBACE,iBAAiB,CAAC,GAAlB,CAAsB,IAAA,GAAI,CAAC,CAAA,CAAE,aAAF,CAAgB,CAAC,SAAjB,CAAA,CAAD,CAA1B,EADF;;cAGA,IAAG,QAAQ,CAAC,OAAT,CAAiB,QAAjB,CAAA,KAA8B,KAAjC;uBACE,KAAK,CAAC,WAAN,CAAkB,SAAlB,CAA4B,CAAC,QAA7B,CAAsC,OAAtC,CAA8C,CAAC,IAA/C,CAAoD,KAAK,CAAA,SAAE,CAAA,MAAP,CAClD;kBAAA,IAAA,EAAS,QAAQ,CAAC,OAAT,CAAiB,MAAjB,CAAT;kBACA,OAAA,EAAS,uCADT;iBADkD,CAApD,EADF;eAAA,MAAA;uBAKE,KAAK,CAAC,WAAN,CAAkB,SAAlB,CAA4B,CAAC,IAA7B,CAAkC,OAAO,CAAA,SAAE,CAAA,MAAT,CAAgB,QAAQ,CAAC,QAAT,CAAA,CAAhB,CAAlC,EALF;;YAJO,CADT;YAWA,KAAA,EAAO,SAAC,QAAD;qBACL,KAAK,CAAC,WAAN,CAAkB,SAAlB,CAA4B,CAAC,QAA7B,CAAsC,OAAtC,CAA8C,CAAC,IAA/C,CAAoD,KAAK,CAAA,SAAE,CAAA,MAAP,CAClD;gBAAA,IAAA,EAAS,2BAAT;gBACA,OAAA,EAAS,EADT;eADkD,CAApD;YADK,CAXP;WADF;QAPA,CAAA,CAAF,CAAG,OAAH;AADF;;IARM;;;;KAHS;AADlB,CANH","file":"../../views/Routes.js","sourcesContent":["define [\n  'common/View', \n  'models/Routes', \n  'views/routes/Loading',\n  'views/routes/Success',\n  'views/routes/Error'\n], (view, routes, loading, success, error) ->\n  class view extends view\n    template: '<article class=\"block\"><i class=\"close\"></i></article>'\n\n    render: (form = require 'models/Form') ->\n      $(document).on 'click', '.close', () ->\n        $(this).parent().remove()\n\n      block   = $ super()\n      wrap    = $('#routes-list')\n      wrap.children().remove()\n      \n      for request in form.requestData()\n        do(request) ->         \n          route = block.clone()\n          route.addClass 'loading'\n          route.html loading::render\n            message: 'Подождите. Идет загрузка рейсов'\n          wrap.append route\n          \n          routes::loadOne\n            data: request\n            success: (response) ->\n              if 'yaCounter32439430' of window\n                yaCounter32439430.hit \"/?#{$('#get-routes').serialize()}\"\n\n              if response.getAttr('routes') is false\n                route.removeClass('loading').addClass('error').html error::render\n                  name:    response.getAttr 'name'\n                  message: 'Ошибка. Нет рейсов на выбранное время'\n              else\n                route.removeClass('loading').html success::render response.getAttrs()\n            error: (response) ->\n              route.removeClass('loading').addClass('error').html error::render\n                name:    'Ошибка. Сервер недоступен'\n                message: ''\n"]}