{"version":3,"sources":["components/AjaxQueue.coffee"],"names":[],"mappings":"AAAA,MAAA,CAAO,CAAC,QAAD,EAAW,YAAX,CAAP,EAAiC,SAAC,CAAD,EAAI,CAAJ;AAC/B,MAAA;SAAM;AACJ,QAAA;;;;IAAA,QAAA,GAAW;;wBAEX,QAAA,GAAU,SAAA;gCACR,WAAA,WAAY,IAAI;IADR;;wBAGV,GAAA,GAAK,SAAC,MAAD;;QAAC,SAAS;;aACb,IAAC,CAAA,QAAD,CAAA,CAAW,CAAC,GAAZ,CAAgB,MAAhB;IADG;;wBAGL,GAAA,GAAK,SAAC,QAAD;;QAAC,WAAW,SAAA,GAAA;;aACf,IAAC,CAAA,QAAD,CAAA,CAAW,CAAC,GAAZ,CAAgB,QAAhB;IADG;;IAGC;AACJ,UAAA;;;;MAAA,QAAA,GAAW;;iCAEX,GAAA,GAAK,SAAC,MAAD;;UAAC,SAAS;;QACb,QAAQ,CAAC,IAAT,CAAc,MAAd;AACA,eAAO;MAFJ;;iCAIL,GAAA,GAAK,SAAC,QAAD;AACH,YAAA;;UADI,WAAW,SAAA,GAAA;;QACf,KAAA,GAAW,CAAC,CAAC,KAAF,CAAQ,QAAR;QACX,QAAA,GAAW;AAEX;eAAM,OAAA,GAAU,KAAK,CAAC,GAAN,CAAA,CAAhB;UACE,OAAO,CAAC,QAAR,GAAmB,SAAC,QAAD,EAAW,MAAX;YACjB,IAAc,KAAK,CAAC,MAAN,KAAgB,CAA9B;qBAAA,QAAA,CAAA,EAAA;;UADiB;uBAGnB,CAAC,CAAC,IAAF,CAAO,OAAP;QAJF,CAAA;;MAJG;;;;;;;;;AApBsB,CAAjC","file":"../../components/AjaxQueue.js","sourcesContent":["define ['jquery', 'underscore'], ($, _) ->\n  class AjaxQueue\n    instance = null\n    \n    instance: () ->\n      instance ?= new AjaxQueuePrivate\n      \n    add: (params = {}) ->\n      @instance().add params\n\n    run: (callback = () ->) ->\n      @instance().run callback\n\n    class AjaxQueuePrivate\n      requests = []\n      \n      add: (params = {}) ->\n        requests.push params\n        return @\n        \n      run: (callback = () ->) ->\n        queue    = _.clone requests\n        requests = []\n      \n        while request = queue.pop()\n          request.complete = (response, status) ->\n            callback() if queue.length is 0\n            \n          $.ajax request\n\n          \n        \n      "]}