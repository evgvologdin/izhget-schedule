{"version":3,"sources":["models/Form.coffee"],"names":[],"mappings":"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","file":"../../models/Form.js","sourcesContent":["define ['jquery'], () ->\n  class form\n    form: null\n    attr:\n      from:      null\n      to:        null\n      date:      null\n      transfers: []\n    rules:\n      empty:   (e) ->\n        if e.val()? and e.val() isnt ''\n          e.parents('.form-group').removeClass 'has-error' \n          return true\n        else\n          e.parents('.form-group').addClass 'has-error'\n          return false\n          \n      compare: (e, c) ->\n        if e.val() isnt c.val()\n          c.parents('.form-group').removeClass 'has-error'\n          return true\n        else\n          c.parents('.form-group').addClass 'has-error'\n          return false\n      \n    constructor: (e = $('form')) ->\n      self = this\n      self.attr.from = if e.find('#from-station').length > 0 then e.find('#from-station') else null\n      self.attr.to   = if e.find('#to-station').length   > 0 then e.find('#to-station')   else null\n      self.attr.date = if e.find('#has-date').is(':checked') then e.find('#select-time')  else e.find('#current-time')\n      self.attr.transfers = []\n      \n      e.find('#transfer-stations').find('input:checked').each () ->\n        self.attr.transfers.push $(this)\n      \n      return @\n    \n    requestData: () ->\n      self = this\n      if self.validate is false\n        return false\n\n      data = []\n\n      data.push\n        from: self.attr.from.val()\n        to:   self.attr.to.val()\n        date: self.attr.date.val()\n        \n      for transfer in self.attr.transfers\n        data.push\n          from:     self.attr.from.val()\n          to:       self.attr.to.val()\n          date:     self.attr.date.val()\n          transfer: transfer.val()\n          \n      return data\n    \n    validate: () ->    \n      if @attr.from isnt null and @attr.to isnt null and @attr.date isnt null and $.isArray(@attr.transfers) is true\n        if @rules.empty(@attr.from) is false\n          return false\n          \n        if @rules.empty(@attr.to) is false\n          return false\n        \n        if @rules.empty(@attr.date) is false\n          return false\n        \n        if @rules.compare(@attr.from, @attr.to) is false\n          return false\n          \n        for transfer in @attr.transfers\n          if @rules.compare(@attr.from, transfer) is false\n            return false\n            \n          if @rules.compare(@attr.to, transfer) is false\n            return false\n          \n        return true\n      else\n        alert 'Invalid Form Data'"]}